<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>Toast&Co.</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/final.css">
</head>

<body>

    <!-- ===== å°è¦½åˆ— ===== -->
    <header class="header">
        <div class="navbar">
            <div class="nav-left nav-icons">
                <a href="login.html" id="memberArea"><i class="fa-regular fa-user icon"></i></a>
                <i class="fa-solid fa-magnifying-glass icon" id="searchIcon"></i>
            </div>

            <div class="logo">
                <img src="assets/img/images/logoo.png" alt="Toast&Co logo">
                <a href="index.html">Toast&Co.</a>
            </div>

            <div class="nav-right nav-icons">
                <a href="cart.html"><i class="fa-solid fa-cart-shopping icon"></i></a>
            </div>
        </div>

        <nav class="menu">
            <a href="about-us.html">é—œæ–¼æˆ‘å€‘</a>
            <a href="goods.html">å•†å“åˆ—è¡¨</a>
            <a href="limited.html">æœŸé–“é™å®š</a>
            <a href="feedback.html">é¡§å®¢å›é¥‹</a>
            <a href="contact.html">è¯çµ¡è³‡è¨Š</a>
            
        </nav>
        <input type="text" id="searchInput" placeholder="æœå°‹å•†å“...">

    </header>

    <main class="checkout-page">

        <h1 class="page-title">çµå¸³</h1>
      
        <div class="checkout-layout">
      
          <!-- å·¦ï¼šå¡«å¯«è³‡æ–™ -->
          <section class="checkout-form">
            <h2>æ”¶ä»¶äººè³‡æ–™</h2>
      
            <label>
              å§“å
              <input type="text" id="name" required>
            </label>
      
            <label>
              é›»è©±
              <input type="tel" id="phone" required>
            </label>
      
            <label>
              Email
              <input type="email" id="email" required>
            </label>
      
            <label>
              åœ°å€
              <input type="text" id="address" required>
            </label>
      
        <button type="button" class="checkout-btn" onclick="submitOrder()">ç¢ºèªä¸‹å–®</button>            
        </section>
      
        <!-- å³ï¼šè¨‚å–®æ‘˜è¦ -->
        <aside class="order-summary" id="order-summary">
          <h2>è¨‚å–®æ‘˜è¦</h2>

          <div id="order-items"></div>

          <hr>

          <p>å°è¨ˆ <span id="checkout-subtotal">NT$ 0</span></p>
          <p>é‹è²» <span id="checkout-shipping">NT$ 60</span></p>
          <p class="total">ç¸½è¨ˆ <span id="checkout-total">NT$ 0</span></p>
        </aside>

        </div>
      
      </main>

      <script src="assets/js/cart.js"></script>
      <script>
        console.log('checkout js loaded');

        const cart = getCart();
        console.log('cart =', cart);

        // é˜²æ­¢ç©ºè³¼ç‰©è»Š
        if (!cart || cart.length === 0) {
          alert('è³¼ç‰©è»Šæ˜¯ç©ºçš„');
          location.href = 'cart.html';
        }

        const itemsBox = document.getElementById('order-items');
        const subtotalEl = document.getElementById('checkout-subtotal');
        const shippingEl = document.getElementById('checkout-shipping');
        const totalEl = document.getElementById('checkout-total');

        let subtotal = 0;
        const shipping = 60;

        itemsBox.innerHTML = '';

        cart.forEach(item => {
          const itemTotal = item.price * item.qty;
          subtotal += itemTotal;

          const row = document.createElement('div');
          row.className = 'summary-item';
          row.innerHTML = `
            <span>${item.name} Ã— ${item.qty}</span>
            <span>NT$ ${itemTotal}</span>
          `;
          itemsBox.appendChild(row);
        });

        subtotalEl.textContent = `NT$ ${subtotal}`;
        shippingEl.textContent = `NT$ ${shipping}`;
        totalEl.textContent = `NT$ ${subtotal + shipping}`;
        // é€å‡ºè¨‚å–®
        function submitOrder() {
          const name = document.getElementById('name').value.trim();
          const phone = document.getElementById('phone').value.trim();
          const email = document.getElementById('email').value.trim();
          const address = document.getElementById('address').value.trim();

          if (!name || !phone || !email || !address) {
            alert('è«‹å®Œæ•´å¡«å¯«è³‡æ–™');
            return;
          }

          alert('è¨‚å–®å·²é€å‡ºï¼æ„Ÿè¬æ‚¨çš„è³¼è²·ï½ ğŸâœ¨');
          localStorage.removeItem('cart');
          location.href = 'index.html';
        }
      </script>
    
    <!-- ===== Footer ===== -->
    <footer class="footer">
      <div class="footer-inner">
          <div class="footer-left">
              <p>Toast&Co.</p>
              <br>
              <img height="100" src="assets/img/images/logoo.png" alt="logo">
          </div>

          <div class="footer-middle">
              <h3>å…¬å¸è³‡è¨Š</h3>
              <p>
                <a href="mailto:0522pamela@gmail.com?subject=å®¢æœè©¢å•"><i class="fa-regular fa-envelope"></i></a>
                <a href="https://www.facebook.com/share/1brKSqFVAn/?mibextid=wwXIfr"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://www.instagram.com/unaizla_?igsh=NTB3N2s4Nzc0N3Nk"><i class="fa-brands fa-instagram"></i></a>
                <a href="tel:0938069567"><i class="fa-solid fa-phone"></i></a>
              </p>
              <p>å…¬å¸åç¨±ï¼šå¥½å¸‚åå¸è‚¡ä»½æœ‰é™å…¬å¸</p>
              <p>é›»è©±ï¼š0941016522</p>
              <p>åœ°å€ï¼š320æ¡ƒåœ’å¸‚ä¸­å£¢å€ä¸­åŸè·¯200è™Ÿ</p>
              <p>æœå‹™æ™‚é–“ï¼šå‘¨ä¸€è‡³å‘¨å…­ 08ï¼š00~17:00</p>
          </div>

          <div class="footer-right">

              <div class="footer-group">
                  <h3>å¸¸è¦‹å•é¡Œ</h3>
                  <a href="faq.html#order">è¨‚è³¼é ˆçŸ¥</a>
                  <a href="faq.html#qa">Q&A</a>
              </div>
          
              <div class="footer-group">
                  <h3>è³¼ç‰©èªªæ˜</h3>
                  <a href="faq.html#storage">ä¿å­˜æ–¹å¼</a>
                  <a href="faq.html#shipping">é‹é€æ–¹å¼</a>
                  <a href="faq.html#payment">ä»˜æ¬¾æ–¹å¼</a>
              </div>
          
          </div>
      </div>
  </footer>
  <script src="assets/js/header-auth.js"></script>

</body>
</html>